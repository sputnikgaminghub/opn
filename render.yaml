databases:
- name: apro-db
  plan: starter
services:
- type: web
  name: apro-airdrop
  env: python
  plan: starter
  buildCommand: pip install -r requirements.txt
  startCommand: gunicorn app:app --bind 0.0.0.0:$PORT --workers 2 --threads 4
  envVars:
  - key: DATABASE_URL
    fromDatabase:
      name: apro-db
      property: connectionString
  - key: SECRET_KEY
    generateValue: true
  - key: ADMIN_API_KEY
    value: CHANGE_ME
  - key: ADMIN_WALLET
    value: '0x252cC763F8ae67500C96F0946aC4F64844c987B1'
  - key: WITHDRAWAL_SUPPORT_URL
    value: https://t.me/opinion_token
  - key: WITHDRAWAL_OPEN_AT
    value: '2026-01-20T00:00:00Z'
  - key: WITHDRAWAL_ETH_FEE_WEI
    value: '100000000000000'
  - key: WITHDRAWAL_BSC_FEE_WEI
    value: '1000000000000000'
  - key: RATE_LIMIT_STORAGE_URL
    value: memory://
  - key: ETH_RPC_URL
    value: https://rpc.ankr.com/eth
  - key: BSC_RPC_URL
    value: https://rpc.ankr.com/bsc
  - key: WALLETCONNECT_PROJECT_ID
    value: CHANGE_ME
  - key: SOL_PRESALE_WALLET
    value: ''
  - key: SOL_RPC_URL
    value: ''
  - key: PRICE_CACHE_TTL_SECONDS
    value: '25'
  - key: VAPID_PUBLIC_KEY
    value: ''
  - key: VAPID_PRIVATE_KEY
    value: ''
  - key: VAPID_SUBJECT
    value: mailto:admin@example.com
  - key: ADMIN_TASKS_KEY
    value: CHANGE_ME
  - key: ADMIN_WITHDRAWALS_KEY
    value: CHANGE_ME
  - key: ADMIN_ANNOUNCEMENTS_KEY
    value: CHANGE_ME
  - key: ADMIN_PRESALE_KEY
    value: CHANGE_ME
  - key: SESSION_LIFETIME_HOURS
    value: '1'
  - key: SESSION_IDLE_TIMEOUT_MINUTES
    value: '15'
  - key: SESSION_COOKIE_SAMESITE
    value: Lax
  - key: USE_SERVER_SIDE_SESSIONS
    value: '0'
  - key: SESSION_REDIS_URL
    value: ''
  # Staking admin (standardized)
  - key: ADMIN_STAKING_KEY
    value: CHANGE_ME
- type: worker
  name: apro-staking-worker
  env: python
  plan: starter
  buildCommand: pip install -r requirements.txt
  startCommand: python staking_worker.py
  envVars:
  - key: DATABASE_URL
    fromDatabase:
      name: apro-db
      property: connectionString
  - key: SECRET_KEY
    generateValue: true
  - key: ETH_RPC_URL
    value: https://rpc.ankr.com/eth
  - key: BSC_RPC_URL
    value: https://rpc.ankr.com/bsc
  - key: STAKE_HOLDING_WALLET_ETH
    value: '0xa84e6D0Fa3B35b18FF7C65568C711A85Ac1A9FC7'
  - key: STAKE_HOLDING_WALLET_BSC
    value: '0xa84e6D0Fa3B35b18FF7C65568C711A85Ac1A9FC7'
  - key: STAKE_REWARD_PER_BNB_PER_DAY
    value: '50'
  - key: STAKE_REWARD_PER_ETH_PER_DAY
    value: '200'
  - key: STAKE_ETH_CONFIRMATIONS
    value: '12'
  - key: STAKE_BSC_CONFIRMATIONS
    value: '15'
  - key: STAKE_WATCHER_INTERVAL_SECONDS
    value: '25'
- type: cron
  name: apro-push-daily
  env: python
  plan: starter
  schedule: 0 12 * * *
  buildCommand: pip install -r requirements.txt
  startCommand: python scripts/send_daily_push.py
  envVars:
  - key: DATABASE_URL
    fromDatabase:
      name: apro-db
      property: connectionString
  - key: SECRET_KEY
    generateValue: true
  - key: ADMIN_API_KEY
    value: CHANGE_ME
  - key: VAPID_PUBLIC_KEY
    value: ''
  - key: VAPID_PRIVATE_KEY
    value: ''
  - key: VAPID_SUBJECT
    value: mailto:admin@example.com
